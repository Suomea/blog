
## 查看系统块设备信息
`lsblk` 列出所有块设备及其挂载点，可显示未挂载的设备，命令输出：
```
NAME         MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS
sda            8:0    0   3.6T  0 disk 
└─sda1         8:1    0   3.6T  0 part /data/disk2
sdb            8:16   0   3.6T  0 disk 
├─sdb1         8:17   0    16M  0 part 
└─sdb2         8:18   0   3.6T  0 part /data/disk1
```
命令默认输出字段解释：  

- NAME：就是装置的文件名，会省略 /dev 等前导目录！
- MAJ:MIN：其实核心认识的装置都是通过这两个代码来熟悉的！分别是`主要:次要`装置代码！
- RM：是否为可卸除装置 (removable device)，如光盘、USB 磁盘等等
- SIZE：容量。
- RO：是否为只读装置的意思
- TYPE：是磁盘 (disk)、分区槽 (partition) 还是只读存储器 (rom) 等输出	
- MOUTPOINT：挂载点路径。
## 分区挂载
### 查看分区表格式
`parted` 命令也可以用来进行分区，支持 `MBR` 和 `GPT`。
```
# parted /dev/sdb print
Model: External USB3.0 (scsi)
Disk /dev/sdb: 1000GB
Sector size (logical/physical): 512B/4096B
Partition Table: gpt
Disk Flags: 

Number  Start   End     Size    File system  Name                          Flags
 1      17.4kB  16.8MB  16.8MB               Microsoft reserved partition  msftres
```

MBR 分区表使用 fdisk 命令分区，GPT 分区表使用 gdisk 分区。注意：`msdos` 是 Linux 工具中对 MBR 分区表的称呼。
### gdisk 分区
gdisk /dev/sdb
```
? 查看帮助信息
n 新增分区
w 保存修改
p 打印分区表
d 删除分区
```
### 格式化分区
分区完成之后查看块设备的属性
```
# blkid
/dev/sda1: UUID="24b6f0e0-de6b-41f4-b2d5-1617ff9e70f3" BLOCK_SIZE="4096" TYPE="ext4" PARTUUID="cfc6c386-01"
/dev/sda5: UUID="95b3dfa2-e338-45b0-b7fa-74473ccea59f" TYPE="swap" PARTUUID="cfc6c386-05"
/dev/sdb1: PARTLABEL="Linux filesystem" PARTUUID="1d55968e-7323-44cf-bff2-ed10b195885e"
/dev/sdb2: PARTLABEL="Linux filesystem" PARTUUID="f4f65b92-f38a-4d59-9fdd-7d72b4a18512"
/dev/sdb3: PARTLABEL="Linux filesystem" PARTUUID="88fe2623-ff77-42f6-bac4-41259d84a921"
```

格式化磁盘，文件系统格式为 ext4。
```
mkfs.ext4 /dev/sdb1
mkfs.ext4 /dev/sdb2
mkfs.ext4 /dev/sdb3
```
### 挂载
比如挂载 /dev/sdb1 到 /srv/nfs/data40
```
# mount UUID="f4f72136-4edf-4abd-9fdd-83d49727f827" /srv/nfs/data40/
# df /srv/nfs/data40
Filesystem     1K-blocks  Used Available Use% Mounted on
/dev/sdb1       40973536    24  38859976   1% /srv/nfs/data40
```

卸除
```
# umount /dev/sdb1
# df /srv/nfs/data40
Filesystem     1K-blocks    Used Available Use% Mounted on
/dev/sda1       19480400 2756488  15709028  15% /
```

### 设置开机挂载
开始挂载在 /etc/fstab 文件里面设置，先查看一下文件内容
```
# cat /etc/fstab 
# /etc/fstab: static file system information.
#
# Use 'blkid' to print the universally unique identifier for a
# device; this may be used with UUID= as a more robust way to name devices
# that works even if disks are added and removed. See fstab(5).
#
# systemd generates mount units based on this file, see systemd.mount(5).
# Please run 'systemctl daemon-reload' after making changes here.
#
# <file system> <mount point>   <type>  <options>       <dump>  <pass>
# / was on /dev/sda1 during installation
UUID=24b6f0e0-de6b-41f4-b2d5-1617ff9e70f3 /               ext4    errors=remount-ro 0       1
# swap was on /dev/sda5 during installation
UUID=95b3dfa2-e338-45b0-b7fa-74473ccea59f none            swap    sw              0       0
/dev/sr0        /media/cdrom0   udf,iso9660 user,noauto     0       0
```
**第一栏：磁盘装置文件名**  
这个字段可以填写的数据主要有三个项目： 

- 文件系统或磁盘的装置文件名，如 /dev/vda2 等。
- 文件系统的 UUID 名称，如 UUID=xxx。
- 文件系统的 LABEL 名称，例如 LABEL=xxx。  

因为每个文件系统都可以有上面三个项目，使用其中任何一个都可以。不过，如果为了一致性，建议设置成 UUID。

**第二栏：挂载点 mount point**  
文件系统的访问路径。

**第三栏：磁盘分区槽的文件系统**  
在手动挂载时可以让系统自动测试挂载，但在这个文件当中必须要手动写入文件系统才行！包括 xfs, ext4, vfat, reiserfs, nfs 等等。

**第四栏：文件系统参数**  
直接设置 defaults 就行了。

**第五栏：能否被 dump 备份指令作用**  
dump 是一个用来做为备份的指令，不过现在有太多的备份方案了，所以这个项目可以不要理会！直接输入 0 就好了！

**第六栏：是否以 fsck 检验扇区**  
早期开机的流程中，会有一段时间去检验本机的文件系统，看看文件系统是否完整 (clean)。 不过这个方式使用的主要是透过 fsck 去做的，我们现在用的 xfs 文件系统就没有办法适用，因为 xfs 会自己进行检验，不需要额外进行这个动作！所以直接填 0 就好了。

**开机挂载示例**
比如设置开机挂载 /dev/sdb1 到 /srv/nfs/data40：
```
UUID="f4f72136-4edf-4abd-9fdd-83d49727f827" /srv/nfs/data40 ext4 defaults 0 0
```
编辑完成之后，使用 `mount -a` 命令更新挂载。
## Debian 挂载 ntfs 文件系统
ntfs 是微软开发的专有文件系统，Debian 挂载需要安装 ntfs-3g 驱动，支持 ntfs 文件系统。

查看是否已经安装了该驱动：
```
dpkg -l | grep ntfs
```

安装驱动：
```
apt install ntfs-3g
```

临时挂载：
```
mount -t ntfs-3g /dev/sda1 /data/disk1
```

设置开机挂载：
```
UUID=C060354A60354904 /data/disk1 ntfs-3g defaults 0 0 
```
